{"version":3,"sources":["hm.min.js"],"names":["angular","module","provider","this","serverUrl","tokenHeaders","$get","factory","$window","isIE","navigator","userAgent","match","isSmartDevice","ua","test","$http","hm","_getHeaders","_getUrl","_seriliz","url","params","$","param","headers","extend","get","method","post","data","Content-Type","put","payload","delete","$q","$timeout","load","datas","deferred","promise","defer","success","fn","then","error","resolve","$document","_deferred","_loaded","_promise","loadScript","src","script","loaded","createElement","onload","e","onerror","reject","body","appendChild","loadCSS","href","style","rel","type"],"mappings":"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","file":"hm.min.js","sourcesContent":["angular.module('hm', ['hm.device', 'hm.http', 'hm.load', 'hm.resource']);\n\nangular.module('hm.device', []);\n\nangular.module('hm.http', []);\n\nangular.module('hm.load', []);\n\nangular.module('hm.resource', []);\n\nangular.module('hm').provider('hm', [\n  function() {\n    this.serverUrl = '';\n    this.tokenHeaders = {};\n    this.$get = function() {\n      return {\n        serverUrl: this.serverUrl,\n        tokenHeaders: this.tokenHeaders\n      };\n    };\n  }\n]);\n\nangular.module('hm.device').factory('hmDevice', [\n  '$window', function($window) {\n    return {\n      isIE: function() {\n        return !!navigator.userAgent.match(/MSIE/i);\n      },\n      isSmartDevice: function() {\n        var ua;\n        ua = $window['navigator']['userAgent'] || $window['navigator']['vendor'] || $window['opera'];\n        return /iPhone|iPod|iPad|Silk|Android|BlackBerry|Opera Mini|IEMobile/.test(ua);\n      }\n    };\n  }\n]);\n\n\n/*\n * http处理\n * get\n * post --> application/x-www-form-urlencoded\n * put  --> application/x-www-form-urlencoded\n * delete\n * payload --> application/json\n */\nangular.module('hm.http').factory('hmHttp', [\n  '$http', 'hm', function($http, hm) {\n    var _getHeaders, _getUrl, _seriliz;\n    _getUrl = function(url) {\n      return hm.serverUrl + url;\n    };\n    _seriliz = function(params) {\n      params = !!params ? params : {};\n      return $.param(params);\n    };\n    _getHeaders = function(headers) {\n      return angular.extend({}, headers);\n    };\n    return {\n      get: function(url, params) {\n        return $http({\n          method: 'GET',\n          url: _getUrl(url),\n          params: params,\n          headers: _getHeaders(hm.tokenHeaders)\n        });\n      },\n      post: function(url, params, headers) {\n        return $http({\n          method: 'POST',\n          url: _getUrl(url),\n          data: _seriliz(params),\n          headers: _getHeaders(headers, hm.tokenHeaders, {\n            'Content-Type': 'application/x-www-form-urlencoded'\n          })\n        });\n      },\n      put: function(url, params, headers) {\n        return $http({\n          method: 'PUT',\n          url: _getUrl(url),\n          data: _seriliz(params),\n          headers: _getHeaders(headers, hm.tokenHeaders, {\n            'Content-Type': 'application/x-www-form-urlencoded'\n          })\n        });\n      },\n      payload: function(url, params, headers) {\n        return $http({\n          method: 'POST',\n          url: _getUrl(url),\n          data: params,\n          headers: _getHeaders(headers, hm.tokenHeaders, {\n            'Content-Type': 'application/json'\n          })\n        });\n      },\n      \"delete\": function(url) {\n        return $http({\n          method: 'DELETE',\n          url: _getUrl(url),\n          headers: _getHeaders(hm.tokenHeaders)\n        });\n      }\n    };\n  }\n]);\n\nangular.module('hm.resource').factory('hmResource', [\n  '$q', '$timeout', function($q, $timeout) {\n    return {\n      load: function(datas) {\n        var deferred, promise;\n        deferred = $q.defer();\n        promise = deferred.promise;\n        promise.success = function(fn) {\n          return promise.then(fn);\n        };\n        promise.error = function(fn) {\n          return promise.then(null, fn);\n        };\n        $timeout((function() {\n          return deferred.resolve(datas);\n        }), 100);\n        return promise;\n      }\n    };\n  }\n]);\n\nangular.module('hm.load').factory('hmLoad', [\n  '$q', '$timeout', '$document', function($q, $timeout, $document) {\n    var _deferred, _loaded, _promise;\n    _loaded = [];\n    _promise = false;\n    _deferred = $q.defer();\n    return {\n      loadScript: function(src) {\n        var deferred, script;\n        if (loaded[src]) {\n          return loaded[src].promise;\n        }\n        deferred = $q.defer();\n        script = $document[0].createElement('script');\n        script.src = src;\n        script.onload = function(e) {\n          return $timeout(function() {\n            return deferred.resolve(e);\n          });\n        };\n        script.onerror = function(e) {\n          return $timeout(function() {\n            return deferred.reject(e);\n          });\n        };\n        $document[0].body.appendChild(script);\n        loaded[src] = deferred;\n        return deferred.promise;\n      },\n      loadCSS: function(href) {\n        var deferred, style;\n        if (loaded[href]) {\n          return loaded[href].promise;\n        }\n        deferred = $q.defer();\n        style = $document[0].createElement('link');\n        style.rel = 'stylesheet';\n        style.type = 'text/css';\n        style.href = href;\n        script.onload = function(e) {\n          return $timeout(function() {\n            return deferred.resolve(e);\n          });\n        };\n        script.onerror = function(e) {\n          return $timeout(function() {\n            return deferred.reject(e);\n          });\n        };\n        $document[0].body.appendChild(script);\n        loaded[href] = deferred;\n        return deferred.promise;\n      }\n    };\n  }\n]);\n"],"sourceRoot":"/source/"}
angular.module("hm.util",[]).factory("hmUtils",[function(){var e;return e=this,e.array={copy:function(n){var r,t,i,o;if(r=[],!angular.isArray(n))return r;for(i=0,o=n.length;i<o;i++)t=n[i],r[r.length]=e.object.copy(t);return r},sort:function(e,n){var r,t,i,o,a,c,u,l,d;if(!angular.isArray(e))return e;for(o=c=0,l=e.length;c<l;o=++c)for(t=e[o],a=u=0,d=e.length;u<d;a=++u)i=e[a],a>o&&n(t,i)&&(r=e[o],e[o]=e[a],e[a]=r);return e}},e.object={copy:function(n){var r,t,i;if(r={},!angular.isObject(n))return r;for(t in n)i=n[t],angular.isArray(i)&&(r[t]=e.array.copy(i)),angular.isObject(i)&&(r[t]=e.object.copy(i)),r[t]=i;return r},replace:function(n,r){var t,i,o,a,c;if(t=e.object.copy(n),r)return t;o={};for(c in r)i=r[c],a=t[i],a&&(o[c]=a,delete t(i));for(c in o)t[c]=o[c];return t}},e.tree={parse:function(n,r){var t,i,o,a,c;return c={code:"code",pcode:"pcode",sort:"sort",sorts:function(e,n){return e[this.sort]>=n[this.sort]}},angular.isArray(n)?(i=angular.extend({},c,r),o=e.array.copy(n),t=function(n){var r,a,c,u,l,d,h,f;for(r=[],l=0,h=o.length;l<h;l++)a=o[l],a[i.pcode]&&n[i.code]&&a[i.pcode]===n[i.code]&&(r.push(a),a.level=n.level+1,t(a));for(n.leaf=r.length>0?"N":"Y",r=e.array.sort(r,i.sorts),u=d=0,f=r.length;d<f;u=++d)c=r[u],c.sort=u+1;return n.children=r,n},(a=function(){var n,r,a,c,u,l,d,h;for(r=[],c=0,l=o.length;c<l;c++)n=o[c],n[i.pcode]&&""!==n[i.pcode]||(n.level=1,r.push(n),t(n));for(e.array.sort(r,i.sorts),a=u=0,d=r.length;u<d;a=++u)h=r[a],h.sort=a+1;return r})()):n},leaf:function(e){var n,r;return n=[],angular.isArray(e)?(r=function(e){var t,i,o;for(i=0,o=e.length;i<o;i++)t=e[i],"Y"!==t.leaf&&r(t.children),n[n.length]=t;return n})(e):n}},{array:e.array,object:e.object,tree:e.tree}}]),angular.module("hm",["hm.device","hm.log","hm.http","hm.resource","hm.ui.load","hm.ui.jq","hm.ui.screenfull","hm.ui.toggleClass","hm.ui.nav.tree","hm.util"]),angular.module("hm.device",[]),angular.module("hm.log",[]),angular.module("hm.resource",[]),angular.module("hm.ui.load",[]),angular.module("hm.http",[]),angular.module("hm").provider("hm",[function(){this.defaults={serverUrl:""},this.tokenHeaders={},this.$get=function(){return{defaults:this.defaults}}}]),angular.module("hm.device").factory("hmDevice",["$window",function(e){return{isIE:function(){return!!navigator.userAgent.match(/MSIE/i)},isSmartDevice:function(){var n;return n=e.navigator.userAgent||e.navigator.vendor||e.opera,/iPhone|iPod|iPad|Silk|Android|BlackBerry|Opera Mini|IEMobile/.test(n)}}}]),angular.module("hm.log").factory("hmLog",["$log",function(e){return{debug:function(){if(e.isDebugEnabled())return e.debug(arguments)},info:function(){if(e.isInfoEnabled())return e.info(arguments)},warn:function(){if(e.isWarnEnabled())return e.warn(arguments)},error:function(){return e.error(arguments)},log:function(){if(e.isDebugEnabled())return e.debug(arguments)}}}]),angular.module("hm.resource").factory("hmResource",["$q","$timeout",function(e,n){return{load:function(r){var t,i;return t=e.defer(),i=t.promise,i.success=function(e){return i.then(e)},i.error=function(e){return i.then(null,e)},n(function(){return t.resolve(r)},100),i}}}]),angular.module("hm.http").factory("hmHttp",["$http","hm",function(e,n){var r,t,i,o;return r={},i=function(e){return e=e?e:{},$.param(e)},t=function(e){return e?angular.extend({},r,e):angular.extend({},r)},o=function(e,r){var t,i;return t=function(e,n){var i,o,a,c,u;if(a=e.indexOf("{"),i=e.indexOf("}"),a<0||i<0)return n(e);if(o=e.substring(a+1,i),u=r[o],!o)throw new Error("can not find param "+o);return delete r[o],c=e.substring(0,a)+u+e.substring(i+1),t(c,n)},i=e,r&&t(e,function(e){return i=e}),n.defaults.serverUrl+i},{setHeader:function(e){return r=e},get:function(n,r){var i;return n=o(n,r),i=t(),e({method:"GET",url:n,params:r,headers:i})},post:function(n,r){var a;return n=o(n,r),r=i(r),a=t({"Content-Type":"application/x-www-form-urlencoded"}),e({method:"POST",url:n,data:r,headers:a})},put:function(n,r,a){return n=o(n,r),r=i(r),a=t({"Content-Type":"application/x-www-form-urlencoded"}),e({method:"PUT",url:n,data:r,headers:a})},payload:function(n,r,i){return n=o(n,r),i=t({"Content-Type":"application/json"}),e({method:"POST",url:n,data:r,headers:i})},"delete":function(n){var r;return n=o(n,params),r=t(),e({method:"DELETE",url:n})}}}]),angular.module("hm.ui.load").factory("hmUiLoad",["$q","$timeout","$document",function(e,n,r){var t;return t=[],{loadScript:function(i){var o,a;return t[i]?t[i].promise:(o=e.defer(),a=r[0].createElement("script"),a.src=i,a.onload=function(e){return n(function(){return o.resolve(e)})},a.onerror=function(e){return n(function(){return o.reject(e)})},r[0].body.appendChild(a),t[i]=o,o.promise)},loadCSS:function(i){var o,a;return t[i]?t[i].promise:(o=e.defer(),a=r[0].createElement("link"),a.rel="stylesheet",a.type="text/css",a.href=i,script.onload=function(e){return n(function(){return o.resolve(e)})},script.onerror=function(e){return n(function(){return o.reject(e)})},r[0].body.appendChild(script),t[i]=o,o.promise)},load:function(n){var r,t,i;return n=angular.isArray(n)?n:n.split(/\s+/),i=this,r=e.defer(),t=r.promise,angular.forEach(n,function(e){return t=t.then(function(){return e.indexOf(".css")>=0?i.loadCSS(e):i.loadScript(e)})}),r.resolve(),t}}}]),angular.module("hm.ui.jq",["hm.ui.load","hm.log"]).directive("hmUiJq",["hmUiLoad","hmLog","JQ_ASSETS_LIB","$timeout",function(e,n,r,t){var i;return{restrict:"A",compile:i=function(i,o){var a;if(!angular.isFunction(i[o.hmUiJq])&&!r[o.hmUiJq])throw new Error('hm-ui-jq: The "'+o.hmUiJq+'" function does not exist');return a=function(i,o,a){var c,u,l;return u=function(){var e;return e=[],a.uiOptions&&(e=i.$eval("["+a.uiOptions+"]")),e},c=function(){return t(function(){return o[a.hmUiJq].apply(o,u())},0,!1)},l=function(){if(a.uiRefresh)return i.$watch(a.uiRefresh,function(){return c()})},a.ngModel&&o.is("select,input,textarea")&&o.bind("change",function(){return o.trigger("input")}),r[a.hmUiJq]?e.load(r[a.hmUiJq]).then(function(){return c(),l()})["catch"](function(e){return n.warn(e)}):(c(),l())}}}}]),angular.module("hm.ui.nav.tree",["ngAnimate"]).directive("hmNavTree",["$timeout","$parse",function(e,n){return{restrict:"E",template:'<ul class="nav nav-list nav-pills nav-stacked hm-nav-tree">\n  <li ng-repeat="row in tree_rows | filter:{visible:true} track by row.branch.uid"\n      ng-class="\'level-{{row.branch.level}}\' + (row.branch.selected ? \' active\':\'\') + \' \' +row.branch.classes.join(\' \')" \n      class="nav-tree-row">\n    <a ng-click="user_select_branch(row.branch)">\n      <i ng-class="row.branch.tree_check_icon" \n         ng-click="user_check_branch(row.branch)" \n         class="indented" ng-show="tree_type == \'checkbox\'"> \n      </i>\n      <i ng-class="row.branch.tree_radio_icon" \n         ng-click="user_radio_branch(row.branch)" \n         class="indented" ng-show="tree_type == \'radio\'"> \n      </i>\n      <i ng-class="row.branch.tree_icon" \n         ng-click="user_expand_branch(row.branch)" \n         class="indented"> \n      </i>\n      <span class="indented tree-label">{{ row.branch.label }} </span>\n    </a>\n  </li>\n</ul>',scope:{treeData:"=",onSelect:"&",onCheck:"&",onRadio:"&",loadData:"&",initSelect:"@",initRadio:"@",initCheck:"@",treeControl:"="},link:function(n,r,t){var i,o,a,c,u,l,d,h,f,s,g,p,v,m,b,k,y,_,w,C,x,S,E,L,R,$;if(null==t.iconExpand&&(t.iconExpand="fa fa-plus"),null==t.iconCollapse&&(t.iconCollapse="fa fa-minus"),null==t.iconLeaf&&(t.iconLeaf="fa fa-file"),null==t.iconChecked&&(t.iconChecked="fa fa-check-square"),null==t.iconUnchecked&&(t.iconUnchecked="fa fa-square-o"),null==t.iconSomeChecked&&(t.iconSomeChecked="fa fa-square"),null==t.iconRadioed&&(t.iconRadioed="fa fa-check-circle"),null==t.iconunRadioed&&(t.iconunRadioed="fa fa-circle-o"),null==t.iconRadioForbid&&(t.iconRadioForbid="fa fa-ban fa-flip-horizontal"),null==t.radioOnlyLeaf&&(t.radioOnlyLeaf=!0),null==t.lazyLoad&&(t.lazyLoad=!1),null==t.treeType&&(t.treeType="select"),o=2,i=1,l=0,u="select",a="checkbox",c="radio",E=null,x=null,n.tree_rows=[],n.tree_type=t.treeType,_=function(e){var n;return n=void 0,e.parent_uid&&m(function(r){if(r.uid===e.parent_uid)return n=r}),n},b=function(e,n){var r;return(r=function(e){var t,i,o,a,c;if(e.children&&e.children.length>0){for(a=e.children,c=[],i=0,o=a.length;i<o;i++)t=a[i],n(t,e),c.push(r(t));return c}})(e)},k=function(e,n){var r;return(r=function(e){var t;if(t=_(e))return n(t,e),r(t)})(e)},m=function(e){var r,t,i,o,a;for(i=n.treeData,o=[],r=0,t=i.length;r<t;r++)a=i[r],e(a),o.push(b(a,function(n,r){return e(n,r)}));return o},S=function(r){return null!=E&&(E.selected=!1),r.selected=!0,E=r,null!=r.onSelect?e(function(){return r.onSelect(r)}):null!=n.onSelect?e(function(){return n.onSelect({branch:r})}):void 0},n.user_select_branch=function(e){if(e!==E)return S(e)},C=function(r){return null!=x&&(x.radio=!1),r.radio=!0,x=r,null!=r.onRadio?e(function(){return r.onRadio(r)}):null!=n.onRadio?e(function(){return n.onRadio({branch:r})}):void 0},n.user_radio_branch=function(e){if(e!==x&&e.tree_radio_icon!==t.iconRadioForbid)return C(e)},v=function(e){return k(e,function(e,n){var r,t,i,o,a;for(e.visible=!0,e.expanded=!0,o=e.children,a=[],t=0,i=o.length;t<i;t++)r=o[t],a.push(r.visible=!0);return a})},p=function(e){var n,r,t,i,o;if(e.expanded=!0,e.children&&e.children.length>0){for(i=e.children,o=[],r=0,t=i.length;r<t;r++)n=i[r],o.push(n.visible=!0);return o}},s=function(e){return e.expanded=!1,b(e,function(e){return e.visible=!1,e.expanded=!1})},g=function(e){return e.expanded=!e.expanded,e.expanded?p(e):s(e)},n.user_expand_branch=function(r){return!t.lazyLoad||r.leaf||r.children&&0!==r.children.length?g(r):null!=n.loadData?e(function(){var e,t,i,o;if(t=n.loadData({branch:r}),t&&0!==t.length){for(i=0,o=t.length;i<o;i++)e=t[i],e.parent_uid=r.uid,e.checked=r.checked;return r.children=t,g(r)}return r.leaf=!0}):r.leaf=!0},y=function(){var e,r,t,a,c,u;for(r=function(e,n){var t,a,c,u,l;if(e.checked===o)return n(e);if(e.checked===i&&e.children&&e.children.length>0){for(u=e.children,l=[],a=0,c=u.length;a<c;a++)t=u[a],l.push(r(t,n));return l}},e=[],c=n.treeData,t=0,a=c.length;t<a;t++)u=c[t],r(u,function(n){return e.push(n)});return e},d=function(e){return b(e,function(e){var n,r,t,i,a;if(e.checked=o,e.children&&e.children.length>0){for(i=e.children,a=[],r=0,t=i.length;r<t;r++)n=i[r],a.push(n.checked=o);return a}})},$=function(e){return b(e,function(e){var n,r,t,i,o;if(e.checked=l,e.children&&e.children.length>0){for(i=e.children,o=[],r=0,t=i.length;r<t;r++)n=i[r],o.push(n.checked=l);return o}})},h=function(e){return k(e,function(e){var n,r,t,a,c,u,d;for(t=e.children,u=t.length,n=0,d=0,a=0,c=t.length;a<c;a++)r=t[a],r.checked===o?n+=1:r.checked===l&&(d+=1);return u===n?e.checked=o:u===d?e.checked=l:e.checked=i})},n.user_check_branch=function(r){return r.checked===o?(r.checked=l,$(r)):r.checked===l?(r.checked=o,d(r)):(r.checked=o,d(r)),h(r),null!=r.onCheck?e(function(){return r.onCheck(r)}):null!=n.onCheck?e(function(){var e;return e=y(),n.onCheck({branches:e})}):void 0},w=function(){return n.tree_rows=[],m(function(e,r){return null==e.uid&&(e.uid=""+Math.random()),null==e.visible&&(r?e.visible=!1:e.visible=!0),null==e.expanded&&(e.expanded=!1),null==e.checked&&(e.checked=l),null==e.radio&&(e.radio=!1),null==e.children&&(e.children=[]),null==e.leaf&&(t.lazyLoad?e.leaf=!1:e.children&&0!==e.children.length?e.leaf=!1:e.leaf=!0),r?(e.level=r.level+1,e.parent_uid=r.uid):e.level=1,e.leaf?e.tree_icon=t.iconLeaf:e.expanded?e.tree_icon=t.iconCollapse:e.tree_icon=t.iconExpand,e.checked===o?e.tree_check_icon=t.iconChecked:e.checked===l?e.tree_check_icon=t.iconUnchecked:e.tree_check_icon=t.iconSomeChecked,e.radio?e.tree_radio_icon=t.iconRadioed:!e.leaf&&t.radioOnlyLeaf?e.tree_radio_icon=t.iconRadioForbid:e.tree_radio_icon=t.iconunRadioed,n.tree_rows.push({branch:e,visible:e.visible})})},n.$watch("treeData",w,!0),null==t.initSelect||t.lazyLoad||(R=t.initSelect,e(function(){var e,r,t,i,o,a;for(e=function(n){var r,t,i,o,a;if(n.uid===R)return n.selected=!0,n.visible=!0,v(n);if(n.children&&n.children.length>0){for(o=n.children,a=[],t=0,i=o.length;t<i;t++)r=o[t],a.push(e(r));return a}},i=n.treeData,o=[],r=0,t=i.length;r<t;r++)a=i[r],o.push(e(a));return o})),null==t.initRadio||t.treeType!==c||t.lazyLoad||(R=t.initRadio,e(function(){var e,r,t,i,o,a;for(e=function(n){var r,t,i,o,a;if(n.uid===R)return n.radio=!0,n.selected=!0,n.visible=!0,v(n);if(n.children&&n.children.length>0){for(o=n.children,a=[],t=0,i=o.length;t<i;t++)r=o[t],a.push(e(r));return a}},i=n.treeData,o=[],r=0,t=i.length;r<t;r++)a=i[r],o.push(e(a));return o})),null==t.initCheck||t.treeType!==a||t.lazyLoad||(f=n.$eval(t.initCheck),f&&f.length>0&&e(function(){var e,r,t,i,a,c;for(e=function(n){var r,t,i,a;for(a=[],t=0,i=f.length;t<i;t++)R=f[t],n.uid===R?(n.checked=o,n.visible=!0,v(n),a.push(h(n))):n.children&&n.children.length>0?a.push(function(){var t,i,o,a;for(o=n.children,a=[],t=0,i=o.length;t<i;t++)r=o[t],a.push(e(r));return a}()):a.push(void 0);return a},i=n.treeData,a=[],r=0,t=i.length;r<t;r++)c=i[r],a.push(e(c));return a})),null!=n.treeControl&&angular.isObject(n.treeControl))return L=n.treeControl,L.getCheckes=function(){return y()}}}}]),angular.module("hm.ui.screenfull",["hm.ui.load"]).directive("hmUiScreenfull",["hmUiLoad","ASSETS_LIB","$document",function(e,n,r){return{restrict:"AC",template:'<i class="fa fa-expand fa-fw text"></i><i class="fa fa-compress fa-fw text-active"></i>',link:function(t,i,o){return i.addClass("hide"),e.load(n.screenfull).then(function(){var e;return e=window.screenfull,e.enabled&&!navigator.userAgent.match(/Trident.*rv:11\./)&&i.removeClass("hide"),i.on("click",function(){var n;return o.target&&(n=$(o.target)[0]),e.toggle(n)}),r.on(e.raw.fullscreenchange,function(){return e.isFullscreen?i.addClass("active"):i.removeClass("active")})})}}}]),angular.module("hm.ui.toggleClass",[]).directive("hmUiToggleClass",[function(){return{restrict:"AC",link:function(e,n,r){return n.on("click",function(e){var t,i,o;return e.preventDefault(),t=r.hmUiToggleClass.split(","),o=r.target?r.target.split(","):Array(n),i=0,angular.forEach(t,function(e){var n;return n=o[o.length&&i],$(n).toggleClass(e),i+=1}),$(n).toggleClass("active")})}}}]);
//# sourceMappingURL=hm.min.js.map

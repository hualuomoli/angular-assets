angular.module("hm.util",[]).factory("hmUtils",[function(){var e;return e=this,e.array={copy:function(n){var r,t,i,o;if(r=[],!angular.isArray(n))return r;for(i=0,o=n.length;i<o;i++)t=n[i],r[r.length]=e.object.copy(t);return r},sort:function(e,n){var r,t,i,o,c,a,u,l,d;if(!angular.isArray(e))return e;for(o=a=0,l=e.length;a<l;o=++a)for(t=e[o],c=u=0,d=e.length;u<d;c=++u)i=e[c],c>o&&n(t,i)&&(r=e[o],e[o]=e[c],e[c]=r);return e}},e.object={copy:function(n){var r,t,i;if(r={},!angular.isObject(n))return r;for(t in n)i=n[t],angular.isArray(i)&&(r[t]=e.array.copy(i)),angular.isObject(i)&&(r[t]=e.object.copy(i)),r[t]=i;return r},replace:function(n,r){var t,i,o,c,a;if(t=e.object.copy(n),r)return t;o={};for(a in r)i=r[a],c=t[i],c&&(o[a]=c,delete t(i));for(a in o)t[a]=o[a];return t}},e.tree={parse:function(n,r){var t,i,o,c,a;return a={code:"code",pcode:"pcode",sort:"sort",sorts:function(e,n){return e[this.sort]>=n[this.sort]}},angular.isArray(n)?(i=angular.extend({},a,r),o=e.array.copy(n),t=function(n){var r,c,a,u,l,d,h,f;for(r=[],l=0,h=o.length;l<h;l++)c=o[l],c[i.pcode]&&n[i.code]&&c[i.pcode]===n[i.code]&&(r.push(c),c.level=n.level+1,t(c));for(n.leaf=r.length>0?"N":"Y",r=e.array.sort(r,i.sorts),u=d=0,f=r.length;d<f;u=++d)a=r[u],a.sort=u+1;return n.children=r,n},(c=function(){var n,r,c,a,u,l,d,h;for(r=[],a=0,l=o.length;a<l;a++)n=o[a],n[i.pcode]&&""!==n[i.pcode]||(n.level=1,r.push(n),t(n));for(e.array.sort(r,i.sorts),c=u=0,d=r.length;u<d;c=++u)h=r[c],h.sort=c+1;return r})()):n},leaf:function(e){var n,r;return n=[],angular.isArray(e)?(r=function(e){var t,i,o;for(i=0,o=e.length;i<o;i++)t=e[i],"Y"!==t.leaf&&r(t.children),n[n.length]=t;return n})(e):n}},{array:e.array,object:e.object,tree:e.tree}}]),angular.module("hm",["hm.device","hm.log","hm.http","hm.resource","hm.ui.load","hm.ui.jq","hm.ui.screenfull","hm.ui.toggleClass","hm.ui.nav.tree","hm.util"]),angular.module("hm.device",[]),angular.module("hm.http",[]),angular.module("hm.log",[]),angular.module("hm.resource",[]),angular.module("hm.ui.load",[]),angular.module("hm").provider("hm",[function(){this.defaults={serverUrl:""},this.tokenHeaders={},this.$get=function(){return{defaults:this.defaults}}}]),angular.module("hm.device").factory("hmDevice",["$window",function(e){return{isIE:function(){return!!navigator.userAgent.match(/MSIE/i)},isSmartDevice:function(){var n;return n=e.navigator.userAgent||e.navigator.vendor||e.opera,/iPhone|iPod|iPad|Silk|Android|BlackBerry|Opera Mini|IEMobile/.test(n)}}}]),angular.module("hm.http").factory("hmHttp",["$http","hm",function(e,n){var r,t,i;return t=function(e){return n.defaults.serverUrl+e},i=function(e){return e=e?e:{},$.param(e)},r=function(){var e,n;return e=Array.prototype.slice.call(arguments),n=[],e.forEach(function(e){if(e)return n[n.length]=e}),angular.extend({},n)},{get:function(n,r){return e({method:"GET",url:t(n),params:r})},post:function(n,o,c){return e({method:"POST",url:t(n),data:i(o),headers:r(c,{"Content-Type":"application/x-www-form-urlencoded"})})},put:function(n,o,c){return e({method:"PUT",url:t(n),data:i(o),headers:r(c,{"Content-Type":"application/x-www-form-urlencoded"})})},payload:function(n,i,o){return e({method:"POST",url:t(n),data:i,headers:r(o,{"Content-Type":"application/json"})})},"delete":function(n){return e({method:"DELETE",url:t(n)})}}}]),angular.module("hm.log").factory("hmLog",["$log",function(e){return{debug:function(){if(e.isDebugEnabled())return e.debug(arguments)},info:function(){if(e.isInfoEnabled())return e.info(arguments)},warn:function(){if(e.isWarnEnabled())return e.warn(arguments)},error:function(){return e.error(arguments)},log:function(){if(e.isDebugEnabled())return e.debug(arguments)}}}]),angular.module("hm.resource").factory("hmResource",["$q","$timeout",function(e,n){return{load:function(r){var t,i;return t=e.defer(),i=t.promise,i.success=function(e){return i.then(e)},i.error=function(e){return i.then(null,e)},n(function(){return t.resolve(r)},100),i}}}]),angular.module("hm.ui.load").factory("hmUiLoad",["$q","$timeout","$document",function(e,n,r){var t;return t=[],{loadScript:function(i){var o,c;return t[i]?t[i].promise:(o=e.defer(),c=r[0].createElement("script"),c.src=i,c.onload=function(e){return n(function(){return o.resolve(e)})},c.onerror=function(e){return n(function(){return o.reject(e)})},r[0].body.appendChild(c),t[i]=o,o.promise)},loadCSS:function(i){var o,c;return t[i]?t[i].promise:(o=e.defer(),c=r[0].createElement("link"),c.rel="stylesheet",c.type="text/css",c.href=i,script.onload=function(e){return n(function(){return o.resolve(e)})},script.onerror=function(e){return n(function(){return o.reject(e)})},r[0].body.appendChild(script),t[i]=o,o.promise)},load:function(n){var r,t,i;return n=angular.isArray(n)?n:n.split(/\s+/),i=this,r=e.defer(),t=r.promise,angular.forEach(n,function(e){return t=t.then(function(){return e.indexOf(".css")>=0?i.loadCSS(e):i.loadScript(e)})}),r.resolve(),t}}}]),angular.module("hm.ui.jq",["hm.ui.load","hm.log"]).directive("hmUiJq",["hmUiLoad","hmLog","JQ_ASSETS_LIB","$timeout",function(e,n,r,t){var i;return{restrict:"A",compile:i=function(i,o){var c;if(!angular.isFunction(i[o.hmUiJq])&&!r[o.hmUiJq])throw new Error('hm-ui-jq: The "'+o.hmUiJq+'" function does not exist');return c=function(i,o,c){var a,u,l;return u=function(){var e;return e=[],c.uiOptions&&(e=i.$eval("["+c.uiOptions+"]")),e},a=function(){return t(function(){return o[c.hmUiJq].apply(o,u())},0,!1)},l=function(){if(c.uiRefresh)return i.$watch(c.uiRefresh,function(){return a()})},c.ngModel&&o.is("select,input,textarea")&&o.bind("change",function(){return o.trigger("input")}),r[c.hmUiJq]?e.load(r[c.hmUiJq]).then(function(){return a(),l()})["catch"](function(e){return n.warn(e)}):(a(),l())}}}}]),angular.module("hm.ui.nav.tree",["ngAnimate"]).directive("hmNavTree",["$timeout","$parse",function(e,n){return{restrict:"E",template:'<ul class="nav nav-list nav-pills nav-stacked hm-nav-tree">\n  <li ng-repeat="row in tree_rows | filter:{visible:true}"\n      ng-class="\'level-{{row.branch.level}}\' + (row.branch.selected ? \' active\':\'\') + \' \' +row.branch.classes.join(\' \')" \n      class="nav-tree-row">\n    <a ng-click="user_select_branch(row.branch)">\n      <i ng-class="row.branch.tree_check_icon" \n         ng-click="user_check_branch(row.branch)" \n         class="indented" ng-show="tree_type == \'checkbox\'"> \n      </i>\n      <i ng-class="row.branch.tree_radio_icon" \n         ng-click="user_radio_branch(row.branch)" \n         class="indented" ng-show="tree_type == \'radio\'"> \n      </i>\n      <i ng-class="row.branch.tree_icon" \n         ng-click="user_expand_branch(row.branch)" \n         class="indented"> \n      </i>\n      <span class="indented tree-label">{{ row.branch.label }} </span>\n    </a>\n  </li>\n</ul>',scope:{treeData:"=",onSelect:"&",onCheck:"&",onRadio:"&",loadData:"&",initSelect:"@",initRadio:"@",initCheck:"@",treeControl:"="},link:function(n,r,t){var i,o,c,a,u,l,d,h,f,s,g,p,v,m,b,k,y,_,C,w,S,x,E,L,R,$;if(null==t.iconExpand&&(t.iconExpand="fa fa-plus"),null==t.iconCollapse&&(t.iconCollapse="fa fa-minus"),null==t.iconLeaf&&(t.iconLeaf="fa fa-file"),null==t.iconChecked&&(t.iconChecked="fa fa-check-square"),null==t.iconUnchecked&&(t.iconUnchecked="fa fa-square-o"),null==t.iconSomeChecked&&(t.iconSomeChecked="fa fa-square"),null==t.iconRadioed&&(t.iconRadioed="fa fa-check-circle"),null==t.iconunRadioed&&(t.iconunRadioed="fa fa-circle-o"),null==t.iconRadioForbid&&(t.iconRadioForbid="fa fa-ban fa-flip-horizontal"),null==t.radioOnlyLeaf&&(t.radioOnlyLeaf=!0),null==t.lazyLoad&&(t.lazyLoad=!1),null==t.treeType&&(t.treeType="select"),o=2,i=1,l=0,u="select",c="checkbox",a="radio",E=null,S=null,n.tree_rows=[],n.tree_type=t.treeType,_=function(e){var n;return n=void 0,e.parent_uid&&m(function(r){if(r.uid===e.parent_uid)return n=r}),n},b=function(e,n){var r;return(r=function(e){var t,i,o,c,a;if(e.children&&e.children.length>0){for(c=e.children,a=[],i=0,o=c.length;i<o;i++)t=c[i],n(t,e),a.push(r(t));return a}})(e)},k=function(e,n){var r;return(r=function(e){var t;if(t=_(e))return n(t,e),r(t)})(e)},m=function(e){var r,t,i,o,c;for(i=n.treeData,o=[],r=0,t=i.length;r<t;r++)c=i[r],e(c),o.push(b(c,function(n,r){return e(n,r)}));return o},x=function(r){return null!=E&&(E.selected=!1),r.selected=!0,E=r,null!=r.onSelect?e(function(){return r.onSelect(r)}):null!=n.onSelect?e(function(){return n.onSelect({branch:r})}):void 0},n.user_select_branch=function(e){if(e!==E)return x(e)},w=function(r){return null!=S&&(S.radio=!1),r.radio=!0,S=r,null!=r.onRadio?e(function(){return r.onRadio(r)}):null!=n.onRadio?e(function(){return n.onRadio({branch:r})}):void 0},n.user_radio_branch=function(e){if(e!==S&&e.tree_radio_icon!==t.iconRadioForbid)return w(e)},v=function(e){return k(e,function(e,n){var r,t,i,o,c;for(e.visible=!0,e.expanded=!0,o=e.children,c=[],t=0,i=o.length;t<i;t++)r=o[t],c.push(r.visible=!0);return c})},p=function(e){var n,r,t,i,o;if(e.expanded=!0,e.children&&e.children.length>0){for(i=e.children,o=[],r=0,t=i.length;r<t;r++)n=i[r],o.push(n.visible=!0);return o}},s=function(e){return e.expanded=!1,b(e,function(e){return e.expanded=!1,e.visible=!1})},g=function(e){return e.expanded=!e.expanded,e.expanded?p(e):s(e)},n.user_expand_branch=function(r){return!t.lazyLoad||r.leaf||r.children&&0!==r.children.length?g(r):null!=n.loadData?e(function(){var e,t,i,o;if(t=n.loadData({branch:r}),t&&0!==t.length){for(i=0,o=t.length;i<o;i++)e=t[i],e.parent_uid=r.uid,e.checked=r.checked;return r.children=t,g(r)}return r.leaf=!0}):r.leaf=!0},y=function(){var e,r,t,c,a,u;for(r=function(e,n){var t,c,a,u,l;if(e.checked===o)return n(e);if(e.checked===i&&e.children&&e.children.length>0){for(u=e.children,l=[],c=0,a=u.length;c<a;c++)t=u[c],l.push(r(t,n));return l}},e=[],a=n.treeData,t=0,c=a.length;t<c;t++)u=a[t],r(u,function(n){return e.push(n)});return e},d=function(e){return b(e,function(e){var n,r,t,i,c;if(e.checked=o,e.children&&e.children.length>0){for(i=e.children,c=[],r=0,t=i.length;r<t;r++)n=i[r],c.push(n.checked=o);return c}})},$=function(e){return b(e,function(e){var n,r,t,i,o;if(e.checked=l,e.children&&e.children.length>0){for(i=e.children,o=[],r=0,t=i.length;r<t;r++)n=i[r],o.push(n.checked=l);return o}})},h=function(e){return k(e,function(e){var n,r,t,c,a,u,d;for(t=e.children,u=t.length,n=0,d=0,c=0,a=t.length;c<a;c++)r=t[c],r.checked===o?n+=1:r.checked===l&&(d+=1);return u===n?e.checked=o:u===d?e.checked=l:e.checked=i})},n.user_check_branch=function(r){return r.checked===o?(r.checked=l,$(r)):r.checked===l?(r.checked=o,d(r)):(r.checked=o,d(r)),h(r),null!=r.onCheck?e(function(){return r.onCheck(r)}):null!=n.onCheck?e(function(){var e;return e=y(),n.onCheck({branches:e})}):void 0},C=function(){return n.tree_rows=[],m(function(e,r){return null==e.uid&&(e.uid=""+Math.random()),null==e.visible&&(r?e.visible=!1:e.visible=!0),null==e.expanded&&(e.expanded=!1),null==e.checked&&(e.checked=l),null==e.radio&&(e.radio=!1),null==e.children&&(e.children=[]),null==e.leaf&&(t.lazyLoad?e.leaf=!1:e.children&&0!==e.children.length?e.leaf=!1:e.leaf=!0),r?(e.level=r.level+1,e.parent_uid=r.uid):e.level=1,e.leaf?e.tree_icon=t.iconLeaf:e.expanded?e.tree_icon=t.iconCollapse:e.tree_icon=t.iconExpand,e.checked===o?e.tree_check_icon=t.iconChecked:e.checked===l?e.tree_check_icon=t.iconUnchecked:e.tree_check_icon=t.iconSomeChecked,e.radio?e.tree_radio_icon=t.iconRadioed:!e.leaf&&t.radioOnlyLeaf?e.tree_radio_icon=t.iconRadioForbid:e.tree_radio_icon=t.iconunRadioed,n.tree_rows.push({branch:e,visible:e.visible})})},n.$watch("treeData",C,!0),null==t.initSelect||t.lazyLoad||(R=t.initSelect,e(function(){var e,r,t,i,o,c;for(e=function(n){var r,t,i,o,c;if(n.uid===R)return n.selected=!0,n.visible=!0,v(n);if(n.children&&n.children.length>0){for(o=n.children,c=[],t=0,i=o.length;t<i;t++)r=o[t],c.push(e(r));return c}},i=n.treeData,o=[],r=0,t=i.length;r<t;r++)c=i[r],o.push(e(c));return o})),null==t.initRadio||t.treeType!==a||t.lazyLoad||(R=t.initRadio,e(function(){var e,r,t,i,o,c;for(e=function(n){var r,t,i,o,c;if(n.uid===R)return n.radio=!0,n.selected=!0,n.visible=!0,v(n);if(n.children&&n.children.length>0){for(o=n.children,c=[],t=0,i=o.length;t<i;t++)r=o[t],c.push(e(r));return c}},i=n.treeData,o=[],r=0,t=i.length;r<t;r++)c=i[r],o.push(e(c));return o})),null==t.initCheck||t.treeType!==c||t.lazyLoad||(f=n.$eval(t.initCheck),f&&f.length>0&&e(function(){var e,r,t,i,c,a;for(e=function(n){var r,t,i,c;for(c=[],t=0,i=f.length;t<i;t++)R=f[t],n.uid===R?(n.checked=o,n.visible=!0,v(n),c.push(h(n))):n.children&&n.children.length>0?c.push(function(){var t,i,o,c;for(o=n.children,c=[],t=0,i=o.length;t<i;t++)r=o[t],c.push(e(r));return c}()):c.push(void 0);return c},i=n.treeData,c=[],r=0,t=i.length;r<t;r++)a=i[r],c.push(e(a));return c})),null!=n.treeControl&&angular.isObject(n.treeControl))return L=n.treeControl,L.getCheckes=function(){return y()}}}}]),angular.module("hm.ui.screenfull",["hm.ui.load"]).directive("hmUiScreenfull",["hmUiLoad","ASSETS_LIB","$document",function(e,n,r){return{restrict:"AC",template:'<i class="fa fa-expand fa-fw text"></i><i class="fa fa-compress fa-fw text-active"></i>',link:function(t,i,o){return i.addClass("hide"),e.load(n.screenfull).then(function(){var e;return e=window.screenfull,e.enabled&&!navigator.userAgent.match(/Trident.*rv:11\./)&&i.removeClass("hide"),i.on("click",function(){var n;return o.target&&(n=$(o.target)[0]),e.toggle(n)}),r.on(e.raw.fullscreenchange,function(){return e.isFullscreen?i.addClass("active"):i.removeClass("active")})})}}}]),angular.module("hm.ui.toggleClass",[]).directive("hmUiToggleClass",[function(){return{restrict:"AC",link:function(e,n,r){return n.on("click",function(e){var t,i,o;return e.preventDefault(),t=r.hmUiToggleClass.split(","),o=r.target?r.target.split(","):Array(n),i=0,angular.forEach(t,function(e){var n;return n=o[o.length&&i],$(n).toggleClass(e),i+=1}),$(n).toggleClass("active")})}}}]);
//# sourceMappingURL=hm.min.js.map

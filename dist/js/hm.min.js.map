{"version":3,"sources":["hm.min.js"],"names":["angular","module","provider","this","defaults","serverUrl","tokenHeaders","$get","factory","$window","isIE","navigator","userAgent","match","isSmartDevice","ua","test","$http","hm","_getHeaders","_getUrl","_seriliz","url","params","$","param","array","validArray","Array","prototype","slice","call","arguments","forEach","ele","length","extend","get","method","post","headers","data","Content-Type","put","payload","delete","$log","debug","isDebugEnabled","info","isInfoEnabled","warn","isWarnEnabled","error","log","$q","$timeout","load","datas","deferred","promise","defer","success","fn","then","resolve","$document","_loaded","loadScript","src","script","createElement","onload","e","onerror","reject","body","appendChild","loadCSS","href","style","rel","type","srcs","self","isArray","split","indexOf","directive","hmUiLoad","hmLog","JQ_ASSETS_LIB","hmUiJqCompilingFunction","restrict","compile","attrs","hmUiJqLinkingFunction","isFunction","hmUiJq","Error","scope","callPlugin","getOptions","refresh","linkOptions","uiOptions","$eval","apply","uiRefresh","$watch","ngModel","is","bind","trigger","ASSETS_LIB","template","link","addClass","screenfull","window","enabled","removeClass","on","target","toggle","raw","fullscreenchange","isFullscreen","classes","key","targets","preventDefault","hmUiToggleClass","_class","toggleClass"],"mappings":"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","file":"hm.min.js","sourcesContent":["angular.module('hm', ['hm.device', 'hm.ui.load', 'hm.log', 'hm.http', 'hm.resource', 'hm.ui.jq', 'hm.ui.screenfull', 'hm.ui.toggleClass']);\n\nangular.module('hm.device', []);\n\nangular.module('hm.http', []);\n\nangular.module('hm.log', []);\n\nangular.module('hm.resource', []);\n\nangular.module('hm.ui.load', []);\n\nangular.module('hm').provider('hm', [\n  function() {\n    this.defaults = {\n      serverUrl: ''\n    };\n    this.tokenHeaders = {};\n    this.$get = function() {\n      return {\n        defaults: this.defaults\n      };\n    };\n  }\n]);\n\nangular.module('hm.device').factory('hmDevice', [\n  '$window', function($window) {\n    return {\n      isIE: function() {\n        return !!navigator.userAgent.match(/MSIE/i);\n      },\n      isSmartDevice: function() {\n        var ua;\n        ua = $window['navigator']['userAgent'] || $window['navigator']['vendor'] || $window['opera'];\n        return /iPhone|iPod|iPad|Silk|Android|BlackBerry|Opera Mini|IEMobile/.test(ua);\n      }\n    };\n  }\n]);\n\n\n/*\n * http处理\n * get\n * post --> application/x-www-form-urlencoded\n * put  --> application/x-www-form-urlencoded\n * delete\n * payload --> application/json\n */\nangular.module('hm.http').factory('hmHttp', [\n  '$http', 'hm', function($http, hm) {\n    var _getHeaders, _getUrl, _seriliz;\n    _getUrl = function(url) {\n      return hm.defaults.serverUrl + url;\n    };\n    _seriliz = function(params) {\n      params = !!params ? params : {};\n      return $.param(params);\n    };\n    _getHeaders = function() {\n      var array, validArray;\n      array = Array.prototype.slice.call(arguments);\n      validArray = [];\n      array.forEach(function(ele) {\n        if (!!ele) {\n          return validArray[validArray.length] = ele;\n        }\n      });\n      return angular.extend({}, validArray);\n    };\n    return {\n      get: function(url, params) {\n        return $http({\n          method: 'GET',\n          url: _getUrl(url),\n          params: params\n        });\n      },\n      post: function(url, params, headers) {\n        return $http({\n          method: 'POST',\n          url: _getUrl(url),\n          data: _seriliz(params),\n          headers: _getHeaders(headers, {\n            'Content-Type': 'application/x-www-form-urlencoded'\n          })\n        });\n      },\n      put: function(url, params, headers) {\n        return $http({\n          method: 'PUT',\n          url: _getUrl(url),\n          data: _seriliz(params),\n          headers: _getHeaders(headers, {\n            'Content-Type': 'application/x-www-form-urlencoded'\n          })\n        });\n      },\n      payload: function(url, params, headers) {\n        return $http({\n          method: 'POST',\n          url: _getUrl(url),\n          data: params,\n          headers: _getHeaders(headers, {\n            'Content-Type': 'application/json'\n          })\n        });\n      },\n      \"delete\": function(url) {\n        return $http({\n          method: 'DELETE',\n          url: _getUrl(url)\n        });\n      }\n    };\n  }\n]);\n\nangular.module('hm.log').factory('hmLog', [\n  '$log', function($log) {\n    return {\n      debug: function() {\n        if ($log.isDebugEnabled()) {\n          return $log.debug(arguments);\n        }\n      },\n      info: function() {\n        if ($log.isInfoEnabled()) {\n          return $log.info(arguments);\n        }\n      },\n      warn: function() {\n        if ($log.isWarnEnabled()) {\n          return $log.warn(arguments);\n        }\n      },\n      error: function() {\n        return $log.error(arguments);\n      },\n      log: function() {\n        if ($log.isDebugEnabled()) {\n          return $log.debug(arguments);\n        }\n      }\n    };\n  }\n]);\n\nangular.module('hm.resource').factory('hmResource', [\n  '$q', '$timeout', function($q, $timeout) {\n    return {\n      load: function(datas) {\n        var deferred, promise;\n        deferred = $q.defer();\n        promise = deferred.promise;\n        promise.success = function(fn) {\n          return promise.then(fn);\n        };\n        promise.error = function(fn) {\n          return promise.then(null, fn);\n        };\n        $timeout((function() {\n          return deferred.resolve(datas);\n        }), 100);\n        return promise;\n      }\n    };\n  }\n]);\n\nangular.module('hm.ui.load').factory('hmUiLoad', [\n  '$q', '$timeout', '$document', function($q, $timeout, $document) {\n    var _loaded;\n    _loaded = [];\n    return {\n      loadScript: function(src) {\n        var deferred, script;\n        if (_loaded[src]) {\n          return _loaded[src].promise;\n        }\n        deferred = $q.defer();\n        script = $document[0].createElement('script');\n        script.src = src;\n        script.onload = function(e) {\n          return $timeout(function() {\n            return deferred.resolve(e);\n          });\n        };\n        script.onerror = function(e) {\n          return $timeout(function() {\n            return deferred.reject(e);\n          });\n        };\n        $document[0].body.appendChild(script);\n        _loaded[src] = deferred;\n        return deferred.promise;\n      },\n      loadCSS: function(href) {\n        var deferred, style;\n        if (_loaded[href]) {\n          return _loaded[href].promise;\n        }\n        deferred = $q.defer();\n        style = $document[0].createElement('link');\n        style.rel = 'stylesheet';\n        style.type = 'text/css';\n        style.href = href;\n        script.onload = function(e) {\n          return $timeout(function() {\n            return deferred.resolve(e);\n          });\n        };\n        script.onerror = function(e) {\n          return $timeout(function() {\n            return deferred.reject(e);\n          });\n        };\n        $document[0].body.appendChild(script);\n        _loaded[href] = deferred;\n        return deferred.promise;\n      },\n      load: function(srcs) {\n        var deferred, promise, self;\n        srcs = angular.isArray(srcs) ? srcs : srcs.split(/\\s+/);\n        self = this;\n        deferred = $q.defer();\n        promise = deferred.promise;\n        angular.forEach(srcs, function(src) {\n          return promise = promise.then(function() {\n            if (src.indexOf('.css') >= 0) {\n              return self.loadCSS(src);\n            } else {\n              return self.loadScript(src);\n            }\n          });\n        });\n        deferred.resolve();\n        return promise;\n      }\n    };\n  }\n]);\n\n\n/*\n * 调用 jquery 的plugin 插件\n */\nangular.module('hm.ui.jq', ['hm.ui.load', 'hm.log']).directive('hmUiJq', [\n  'hmUiLoad', 'hmLog', 'JQ_ASSETS_LIB', '$timeout', function(hmUiLoad, hmLog, JQ_ASSETS_LIB, $timeout) {\n    var hmUiJqCompilingFunction;\n    return {\n      restrict: 'A',\n      compile: hmUiJqCompilingFunction = function(ele, attrs) {\n        var hmUiJqLinkingFunction;\n        if (!angular.isFunction(ele[attrs.hmUiJq]) && !JQ_ASSETS_LIB[attrs.hmUiJq]) {\n          throw new Error('hm-ui-jq: The \"' + attrs.hmUiJq + '\" function does not exist');\n        }\n        return hmUiJqLinkingFunction = function(scope, ele, attrs) {\n          var callPlugin, getOptions, refresh;\n          getOptions = function() {\n            var linkOptions;\n            linkOptions = [];\n            if (attrs.uiOptions) {\n              linkOptions = scope.$eval('[' + attrs.uiOptions + ']');\n            }\n            return linkOptions;\n          };\n          callPlugin = function() {\n            return $timeout((function() {\n              return ele[attrs.hmUiJq].apply(ele, getOptions());\n            }), 0, false);\n          };\n          refresh = function() {\n            if (attrs.uiRefresh) {\n              return scope.$watch(attrs.uiRefresh, function() {\n                return callPlugin();\n              });\n            }\n          };\n          if (attrs.ngModel && ele.is('select,input,textarea')) {\n            ele.bind('change', function() {\n              return ele.trigger('input');\n            });\n          }\n          if (JQ_ASSETS_LIB[attrs.hmUiJq]) {\n            return hmUiLoad.load(JQ_ASSETS_LIB[attrs.hmUiJq]).then(function() {\n              callPlugin();\n              return refresh();\n            })[\"catch\"](function(e) {\n              return hmLog.warn(e);\n            });\n          } else {\n            callPlugin();\n            return refresh();\n          }\n        };\n      }\n    };\n  }\n]);\n\n\n/*\n * 全屏\n */\nangular.module('hm.ui.screenfull', ['hm.ui.load']).directive('hmUiScreenfull', [\n  'hmUiLoad', 'ASSETS_LIB', '$document', function(hmUiLoad, ASSETS_LIB, $document) {\n    return {\n      restrict: 'AC',\n      template: '<i class=\"fa fa-expand fa-fw text\"></i><i class=\"fa fa-compress fa-fw text-active\"></i>',\n      link: function(scope, ele, attrs) {\n        ele.addClass('hide');\n        return hmUiLoad.load(ASSETS_LIB.screenfull).then(function() {\n          var screenfull;\n          screenfull = window.screenfull;\n          if (screenfull.enabled && !navigator.userAgent.match(/Trident.*rv:11\\./)) {\n            ele.removeClass('hide');\n          }\n          ele.on('click', function() {\n            var target;\n            attrs.target && (target = $(attrs.target)[0]);\n            return screenfull.toggle(target);\n          });\n          return $document.on(screenfull.raw.fullscreenchange, function() {\n            if (screenfull.isFullscreen) {\n              return ele.addClass('active');\n            } else {\n              return ele.removeClass('active');\n            }\n          });\n        });\n      }\n    };\n  }\n]);\n\n\n/*\n * 点击指令的元素,让target对应元素toggle样式\n */\nangular.module('hm.ui.toggleClass', []).directive('hmUiToggleClass', [\n  function() {\n    return {\n      restrict: 'AC',\n      link: function(scope, ele, attrs) {\n        return ele.on('click', function(e) {\n          var classes, key, targets;\n          e.preventDefault();\n          classes = attrs.hmUiToggleClass.split(',');\n          targets = attrs.target ? attrs.target.split(',') : Array(ele);\n          key = 0;\n          angular.forEach(classes, function(_class) {\n            var target;\n            target = targets[targets.length && key];\n            $(target).toggleClass(_class);\n            return key += 1;\n          });\n          return $(ele).toggleClass('active');\n        });\n      }\n    };\n  }\n]);\n"],"sourceRoot":"/source/"}
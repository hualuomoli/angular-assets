{"version":3,"sources":["hm.min.js"],"names":["angular","module","factory","_self","this","array","copy","datas","_datas","data","k","len","isArray","length","object","sort","callback","_temp","d1","d2","i","j","l","len1","_data","key","value","isObject","replace","config","_key","_value","tree","parse","_addChild","_config","_parse","defaultConfig","code","pcode","sorts","extend","pData","_children","child","index","push","level","leaf","children","_result","r","provider","defaults","serverUrl","tokenHeaders","$get","$window","isIE","navigator","userAgent","match","isSmartDevice","ua","test","$http","hm","_getHeaders","_getUrl","_seriliz","url","params","$","param","validArray","Array","prototype","slice","call","arguments","forEach","ele","get","method","post","headers","Content-Type","put","payload","delete","$log","debug","isDebugEnabled","info","isInfoEnabled","warn","isWarnEnabled","error","log","$q","$timeout","load","deferred","promise","defer","success","fn","then","resolve","$document","_loaded","loadScript","src","script","createElement","onload","e","onerror","reject","body","appendChild","loadCSS","href","style","rel","type","srcs","self","split","indexOf","directive","hmUiLoad","hmLog","JQ_ASSETS_LIB","hmUiJqCompilingFunction","restrict","compile","attrs","hmUiJqLinkingFunction","isFunction","hmUiJq","Error","scope","callPlugin","getOptions","refresh","linkOptions","uiOptions","$eval","apply","uiRefresh","$watch","ngModel","is","bind","trigger","ASSETS_LIB","template","link","addClass","screenfull","window","enabled","removeClass","on","target","toggle","raw","fullscreenchange","isFullscreen","classes","targets","preventDefault","hmUiToggleClass","_class","toggleClass"],"mappings":"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","file":"hm.min.js","sourcesContent":["\n/*\n * 集合工具\n */\nangular.module('hm.util', []).factory('hmUtils', [\n  function() {\n    var _self;\n    _self = this;\n    return {\n      array: function() {\n        return {\n          copy: function(datas) {\n            var _datas, data, k, len;\n            _datas = [];\n            if (!angular.isArray(datas)) {\n              return _datas;\n            }\n            for (k = 0, len = datas.length; k < len; k++) {\n              data = datas[k];\n              _datas[_datas.length] = _self.object.copy(data);\n            }\n            return _datas;\n          },\n          sort: function(datas, callback) {\n            var _temp, d1, d2, i, j, k, l, len, len1;\n            if (!angular.isArray(datas)) {\n              return datas;\n            }\n            for (i = k = 0, len = datas.length; k < len; i = ++k) {\n              d1 = datas[i];\n              for (j = l = 0, len1 = datas.length; l < len1; j = ++l) {\n                d2 = datas[j];\n                if (j > i && callback(d1, d2)) {\n                  _temp = datas[i];\n                  datas[i] = datas[j];\n                  datas[j] = _temp;\n                }\n              }\n            }\n            return datas;\n          }\n        };\n      },\n      object: function() {\n        return {\n          copy: function(data) {\n            var _data, key, value;\n            _data = {};\n            if (!angular.isObject(data)) {\n              return _data;\n            }\n            for (key in data) {\n              value = data[key];\n              if (angular.isArray(value)) {\n                _data[key] = _self.array.copy(value);\n              }\n              if (angular.isObject(value)) {\n                _data[key] = _self.object.copy(value);\n              }\n              _data[key] = value;\n            }\n            return _data;\n          },\n          replace: function(data, config) {\n            var _data, _key, _temp, _value, key;\n            _data = _self.object.copy(data);\n            if (!!config) {\n              return _data;\n            }\n            _temp = {};\n            for (key in config) {\n              _key = config[key];\n              _value = _data[_key];\n              if (!!_value) {\n                _temp[key] = _value;\n                delete _data(_key);\n              }\n            }\n            for (key in _temp) {\n              _data[key] = _temp[key];\n            }\n            return _data;\n          }\n        };\n      },\n      tree: function() {\n        return {\n          parse: function(datas, config) {\n            var _addChild, _config, _datas, _parse, defaultConfig;\n            defaultConfig = {\n              \"code\": 'code',\n              \"pcode\": 'pcode',\n              \"sort\": \"sort\",\n              \"sorts\": function(d1, d2) {\n                return d1[this.sort] >= d2[this.sort];\n              }\n            };\n            if (!angular.isArray(datas)) {\n              return datas;\n            }\n            _config = angular.extend({}, defaultConfig, config);\n            _datas = _self.array.copy(datas);\n            _addChild = function(pData) {\n              var _children, _data, child, index, k, l, len, len1;\n              _children = [];\n              for (k = 0, len = _datas.length; k < len; k++) {\n                _data = _datas[k];\n                if (!!_data[_config.pcode] && !!pData[_config.code] && _data[_config.pcode] === pData[_config.code]) {\n                  _children.push(_data);\n                  _data.level = pData.level + 1;\n                  _addChild(_data);\n                }\n              }\n              pData.leaf = _children.length > 0 ? 'N' : 'Y';\n              _children = _self.array.sort(_children, _config.sorts);\n              for (index = l = 0, len1 = _children.length; l < len1; index = ++l) {\n                child = _children[index];\n                child.sort = index + 1;\n              }\n              pData.children = _children;\n              return pData;\n            };\n            _parse = function() {\n              var _data, _result, index, k, l, len, len1, r;\n              _result = [];\n              for (k = 0, len = _datas.length; k < len; k++) {\n                _data = _datas[k];\n                if (!_data[_config.pcode] || _data[_config.pcode] === '') {\n                  _data.level = 1;\n                  _result.push(_data);\n                  _addChild(_data);\n                }\n              }\n              _self.array.sort(_result, _config.sorts);\n              for (index = l = 0, len1 = _result.length; l < len1; index = ++l) {\n                r = _result[index];\n                r.sort = index + 1;\n              }\n              return _result;\n            };\n            return _parse();\n          }\n        };\n      }\n    };\n  }\n]);\n\nangular.module('hm', ['hm.device', 'hm.log', 'hm.http', 'hm.resource', 'hm.ui.load', 'hm.ui.jq', 'hm.ui.screenfull', 'hm.ui.toggleClass', 'hm.util']);\n\nangular.module('hm.device', []);\n\nangular.module('hm.http', []);\n\nangular.module('hm.log', []);\n\nangular.module('hm.resource', []);\n\nangular.module('hm.ui.load', []);\n\nangular.module('hm').provider('hm', [\n  function() {\n    this.defaults = {\n      serverUrl: ''\n    };\n    this.tokenHeaders = {};\n    this.$get = function() {\n      return {\n        defaults: this.defaults\n      };\n    };\n  }\n]);\n\nangular.module('hm.device').factory('hmDevice', [\n  '$window', function($window) {\n    return {\n      isIE: function() {\n        return !!navigator.userAgent.match(/MSIE/i);\n      },\n      isSmartDevice: function() {\n        var ua;\n        ua = $window['navigator']['userAgent'] || $window['navigator']['vendor'] || $window['opera'];\n        return /iPhone|iPod|iPad|Silk|Android|BlackBerry|Opera Mini|IEMobile/.test(ua);\n      }\n    };\n  }\n]);\n\n\n/*\n * http处理\n * get\n * post --> application/x-www-form-urlencoded\n * put  --> application/x-www-form-urlencoded\n * delete\n * payload --> application/json\n */\nangular.module('hm.http').factory('hmHttp', [\n  '$http', 'hm', function($http, hm) {\n    var _getHeaders, _getUrl, _seriliz;\n    _getUrl = function(url) {\n      return hm.defaults.serverUrl + url;\n    };\n    _seriliz = function(params) {\n      params = !!params ? params : {};\n      return $.param(params);\n    };\n    _getHeaders = function() {\n      var array, validArray;\n      array = Array.prototype.slice.call(arguments);\n      validArray = [];\n      array.forEach(function(ele) {\n        if (!!ele) {\n          return validArray[validArray.length] = ele;\n        }\n      });\n      return angular.extend({}, validArray);\n    };\n    return {\n      get: function(url, params) {\n        return $http({\n          method: 'GET',\n          url: _getUrl(url),\n          params: params\n        });\n      },\n      post: function(url, params, headers) {\n        return $http({\n          method: 'POST',\n          url: _getUrl(url),\n          data: _seriliz(params),\n          headers: _getHeaders(headers, {\n            'Content-Type': 'application/x-www-form-urlencoded'\n          })\n        });\n      },\n      put: function(url, params, headers) {\n        return $http({\n          method: 'PUT',\n          url: _getUrl(url),\n          data: _seriliz(params),\n          headers: _getHeaders(headers, {\n            'Content-Type': 'application/x-www-form-urlencoded'\n          })\n        });\n      },\n      payload: function(url, params, headers) {\n        return $http({\n          method: 'POST',\n          url: _getUrl(url),\n          data: params,\n          headers: _getHeaders(headers, {\n            'Content-Type': 'application/json'\n          })\n        });\n      },\n      \"delete\": function(url) {\n        return $http({\n          method: 'DELETE',\n          url: _getUrl(url)\n        });\n      }\n    };\n  }\n]);\n\nangular.module('hm.log').factory('hmLog', [\n  '$log', function($log) {\n    return {\n      debug: function() {\n        if ($log.isDebugEnabled()) {\n          return $log.debug(arguments);\n        }\n      },\n      info: function() {\n        if ($log.isInfoEnabled()) {\n          return $log.info(arguments);\n        }\n      },\n      warn: function() {\n        if ($log.isWarnEnabled()) {\n          return $log.warn(arguments);\n        }\n      },\n      error: function() {\n        return $log.error(arguments);\n      },\n      log: function() {\n        if ($log.isDebugEnabled()) {\n          return $log.debug(arguments);\n        }\n      }\n    };\n  }\n]);\n\nangular.module('hm.resource').factory('hmResource', [\n  '$q', '$timeout', function($q, $timeout) {\n    return {\n      load: function(datas) {\n        var deferred, promise;\n        deferred = $q.defer();\n        promise = deferred.promise;\n        promise.success = function(fn) {\n          return promise.then(fn);\n        };\n        promise.error = function(fn) {\n          return promise.then(null, fn);\n        };\n        $timeout((function() {\n          return deferred.resolve(datas);\n        }), 100);\n        return promise;\n      }\n    };\n  }\n]);\n\nangular.module('hm.ui.load').factory('hmUiLoad', [\n  '$q', '$timeout', '$document', function($q, $timeout, $document) {\n    var _loaded;\n    _loaded = [];\n    return {\n      loadScript: function(src) {\n        var deferred, script;\n        if (_loaded[src]) {\n          return _loaded[src].promise;\n        }\n        deferred = $q.defer();\n        script = $document[0].createElement('script');\n        script.src = src;\n        script.onload = function(e) {\n          return $timeout(function() {\n            return deferred.resolve(e);\n          });\n        };\n        script.onerror = function(e) {\n          return $timeout(function() {\n            return deferred.reject(e);\n          });\n        };\n        $document[0].body.appendChild(script);\n        _loaded[src] = deferred;\n        return deferred.promise;\n      },\n      loadCSS: function(href) {\n        var deferred, style;\n        if (_loaded[href]) {\n          return _loaded[href].promise;\n        }\n        deferred = $q.defer();\n        style = $document[0].createElement('link');\n        style.rel = 'stylesheet';\n        style.type = 'text/css';\n        style.href = href;\n        script.onload = function(e) {\n          return $timeout(function() {\n            return deferred.resolve(e);\n          });\n        };\n        script.onerror = function(e) {\n          return $timeout(function() {\n            return deferred.reject(e);\n          });\n        };\n        $document[0].body.appendChild(script);\n        _loaded[href] = deferred;\n        return deferred.promise;\n      },\n      load: function(srcs) {\n        var deferred, promise, self;\n        srcs = angular.isArray(srcs) ? srcs : srcs.split(/\\s+/);\n        self = this;\n        deferred = $q.defer();\n        promise = deferred.promise;\n        angular.forEach(srcs, function(src) {\n          return promise = promise.then(function() {\n            if (src.indexOf('.css') >= 0) {\n              return self.loadCSS(src);\n            } else {\n              return self.loadScript(src);\n            }\n          });\n        });\n        deferred.resolve();\n        return promise;\n      }\n    };\n  }\n]);\n\n\n/*\n * 调用 jquery 的plugin 插件\n */\nangular.module('hm.ui.jq', ['hm.ui.load', 'hm.log']).directive('hmUiJq', [\n  'hmUiLoad', 'hmLog', 'JQ_ASSETS_LIB', '$timeout', function(hmUiLoad, hmLog, JQ_ASSETS_LIB, $timeout) {\n    var hmUiJqCompilingFunction;\n    return {\n      restrict: 'A',\n      compile: hmUiJqCompilingFunction = function(ele, attrs) {\n        var hmUiJqLinkingFunction;\n        if (!angular.isFunction(ele[attrs.hmUiJq]) && !JQ_ASSETS_LIB[attrs.hmUiJq]) {\n          throw new Error('hm-ui-jq: The \"' + attrs.hmUiJq + '\" function does not exist');\n        }\n        return hmUiJqLinkingFunction = function(scope, ele, attrs) {\n          var callPlugin, getOptions, refresh;\n          getOptions = function() {\n            var linkOptions;\n            linkOptions = [];\n            if (attrs.uiOptions) {\n              linkOptions = scope.$eval('[' + attrs.uiOptions + ']');\n            }\n            return linkOptions;\n          };\n          callPlugin = function() {\n            return $timeout((function() {\n              return ele[attrs.hmUiJq].apply(ele, getOptions());\n            }), 0, false);\n          };\n          refresh = function() {\n            if (attrs.uiRefresh) {\n              return scope.$watch(attrs.uiRefresh, function() {\n                return callPlugin();\n              });\n            }\n          };\n          if (attrs.ngModel && ele.is('select,input,textarea')) {\n            ele.bind('change', function() {\n              return ele.trigger('input');\n            });\n          }\n          if (JQ_ASSETS_LIB[attrs.hmUiJq]) {\n            return hmUiLoad.load(JQ_ASSETS_LIB[attrs.hmUiJq]).then(function() {\n              callPlugin();\n              return refresh();\n            })[\"catch\"](function(e) {\n              return hmLog.warn(e);\n            });\n          } else {\n            callPlugin();\n            return refresh();\n          }\n        };\n      }\n    };\n  }\n]);\n\n\n/*\n * 全屏\n */\nangular.module('hm.ui.screenfull', ['hm.ui.load']).directive('hmUiScreenfull', [\n  'hmUiLoad', 'ASSETS_LIB', '$document', function(hmUiLoad, ASSETS_LIB, $document) {\n    return {\n      restrict: 'AC',\n      template: '<i class=\"fa fa-expand fa-fw text\"></i><i class=\"fa fa-compress fa-fw text-active\"></i>',\n      link: function(scope, ele, attrs) {\n        ele.addClass('hide');\n        return hmUiLoad.load(ASSETS_LIB.screenfull).then(function() {\n          var screenfull;\n          screenfull = window.screenfull;\n          if (screenfull.enabled && !navigator.userAgent.match(/Trident.*rv:11\\./)) {\n            ele.removeClass('hide');\n          }\n          ele.on('click', function() {\n            var target;\n            attrs.target && (target = $(attrs.target)[0]);\n            return screenfull.toggle(target);\n          });\n          return $document.on(screenfull.raw.fullscreenchange, function() {\n            if (screenfull.isFullscreen) {\n              return ele.addClass('active');\n            } else {\n              return ele.removeClass('active');\n            }\n          });\n        });\n      }\n    };\n  }\n]);\n\n\n/*\n * 点击指令的元素,让target对应元素toggle样式\n */\nangular.module('hm.ui.toggleClass', []).directive('hmUiToggleClass', [\n  function() {\n    return {\n      restrict: 'AC',\n      link: function(scope, ele, attrs) {\n        return ele.on('click', function(e) {\n          var classes, key, targets;\n          e.preventDefault();\n          classes = attrs.hmUiToggleClass.split(',');\n          targets = attrs.target ? attrs.target.split(',') : Array(ele);\n          key = 0;\n          angular.forEach(classes, function(_class) {\n            var target;\n            target = targets[targets.length && key];\n            $(target).toggleClass(_class);\n            return key += 1;\n          });\n          return $(ele).toggleClass('active');\n        });\n      }\n    };\n  }\n]);\n"],"sourceRoot":"/source/"}